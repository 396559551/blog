(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{575:function(e,v,t){"use strict";t.r(v);var a=t(6),_=Object(a.a)({},(function(){var e=this,v=e.$createElement,t=e._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"keep-alive"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#keep-alive"}},[e._v("#")]),e._v(" keep-alive")]),e._v(" "),t("p",[t("code",[e._v("keep-alive")])]),e._v(" "),t("p",[t("code",[e._v("keep-alive")]),e._v("是Vue提供的一个抽象组件，主要用于保留组件状态或避免重新渲染。")]),e._v(" "),t("p",[t("code",[e._v("<keep-alive>")]),e._v(" 包裹动态组件时，会缓存不活动的组件实例，而不是销毁他们。")]),e._v(" "),t("p",[e._v("但是 "),t("code",[e._v("keep-alive")]),e._v(" 会把其包裹的所有组件都缓存起来。")]),e._v(" "),t("h3",{attrs:{id:"分析一下"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分析一下"}},[e._v("#")]),e._v(" "),t("strong",[e._v("分析一下")])]),e._v(" "),t("p",[e._v("我们可以把需求拆分为2步")]),e._v(" "),t("p",[e._v("(1) 把需要缓存和不需要缓存的组件区分开，在组件的路由配置的元信息，meta中定义哪些需要缓存哪些不需要缓存")]),e._v(" "),t("p",[e._v("(2)，开始按需缓存组件")]),e._v(" "),t("p",[e._v("我们从官方文档提供的 api 入手,")]),e._v(" "),t("p",[e._v("keep-alive组件如果设置了 include ，就只有和 include 匹配的组件会被缓存，")]),e._v(" "),t("p",[e._v("所以思路就是，动态修改 include 数组来实现按需缓存。")]),e._v(" "),t("p",[e._v("我们在定义路由是，在元信息中再加一个字段，这里是deepth字段，代表进入路由的层级,比如首页路由deepth是0.5,列表页是1,详情页是2")]),e._v(" "),t("p",[e._v("然后在 app.vue中增加监听器，监听 我们进入路由的 方向")]),e._v(" "),t("h4",{attrs:{id:"使用时会多两个生命周期"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用时会多两个生命周期"}},[e._v("#")]),e._v(" 使用时会多两个生命周期")]),e._v(" "),t("p",[e._v("触发：activated")]),e._v(" "),t("p",[e._v("结束：deactivated")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/352059246",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考链接"),t("OutboundLink")],1)])])}),[],!1,null,null,null);v.default=_.exports}}]);