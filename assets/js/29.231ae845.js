(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{534:function(t,e,i){"use strict";i.r(e);var s=i(6),a=Object(s.a)({},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[i("table",[i("thead",[i("tr",[i("th",{staticStyle:{"text-align":"center"}}),t._v(" "),i("th",{staticStyle:{"text-align":"center"}},[t._v("cookie")]),t._v(" "),i("th",{staticStyle:{"text-align":"center"}},[t._v("localStorage")]),t._v(" "),i("th",{staticStyle:{"text-align":"center"}},[t._v("sessionStroage")]),t._v(" "),i("th",[t._v("session")])])]),t._v(" "),i("tbody",[i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("all")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("key-value存储，同域名可用")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("key-value存储，同域名可用")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("key-value存储，同域名可用")]),t._v(" "),i("td",[t._v("key-value存储，同域名可用")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("存储位置")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("客户端")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("客户端")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("客户端")]),t._v(" "),i("td",[t._v("服务端")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("特点")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("随请求头每次提交")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("不随请求头每次提交")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("不随请求头每次提交，页面关闭即失效")]),t._v(" "),i("td",[t._v("安全，不能被篡改")])]),t._v(" "),i("tr",[i("td",{staticStyle:{"text-align":"center"}},[t._v("跨页")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("可跨页，不可跨域")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("不可跨页，不可跨域")]),t._v(" "),i("td",{staticStyle:{"text-align":"center"}},[t._v("可跨页，不可跨域")]),t._v(" "),i("td")])])]),t._v(" "),i("h3",{attrs:{id:"cookie-session-jwt"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#cookie-session-jwt"}},[t._v("#")]),t._v(" cookie,session,JWT")]),t._v(" "),i("h2",{attrs:{id:"cookie"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[t._v("#")]),t._v(" Cookie")]),t._v(" "),i("p",[t._v("Cookie是保存用户信息的一种最简单的方式，cookie中可以保存用户的一些信息，存放在浏览器的本地存储中，并随着每次请求发送到服务器。")]),t._v(" "),i("ol",[i("li",[t._v("用户首次认证并登陆服务后，服务返回给用户的HTTP中带着一个服务器生成的cookie信息，浏览器会自动保存到本地，带用户下次再访问该网站时会自动带上该cookie；")]),t._v(" "),i("li",[t._v("不同的网站会发送不同的cookie，cookie和域名绑定，并能指定path；")]),t._v(" "),i("li",[t._v("cookie有超时机制，如果超时需要重新认证再让服务方重新分配一个cookie；")]),t._v(" "),i("li",[t._v("cookie可以指定secure=true属性，指定后只有https才能使用该cookie；")]),t._v(" "),i("li",[t._v("cookei还可以指定httponly=true属性，可以防止js拿到cookie，只有服务器可以操作cookie")])]),t._v(" "),i("p",[t._v("不足：")]),t._v(" "),i("ol",[i("li",[t._v("最大的原因是因为它存储在浏览器端，一些别有用心的人能够通过浏览器截获cookie（脚本、利用工具抓取等）；")]),t._v(" "),i("li",[t._v("Cookie在网络中很容易被劫持，这个问题需要用https解决；")]),t._v(" "),i("li",[t._v("Cookie的失效时间是不受服务端控制的，用户可以修改；")]),t._v(" "),i("li",[t._v("同一站点能设置的cookie有限。")])]),t._v(" "),i("h2",{attrs:{id:"session"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#session"}},[t._v("#")]),t._v(" Session")]),t._v(" "),i("p",[t._v("Session是比cookie安全高的另一种会话保持技术，Session把信息存储的服务器端，在浏览器端只需要存储一个session id，服务端通过用户请求中带的session id自动获取用户信息。")]),t._v(" "),i("p",[t._v("session id虽然存储在cookie中，但所有用户信息都存放在服务端，通常公司对自己的用户信息都有更强的安全保护；")]),t._v(" "),i("p",[t._v("服务端可以存储用户大量信息，用户可以用一次登录就可以免密登录同一个公司的不同服务和网站；")]),t._v(" "),i("p",[t._v("session id通常会使用HMAC生成，并结合cookie使用，较为灵活，兼容性较好，防止篡改。")]),t._v(" "),i("p",[t._v("不足：")]),t._v(" "),i("ol",[i("li",[t._v("服务端存储session id需要承受更高的计算成本；")]),t._v(" "),i("li",[t._v("负载均衡需要考虑共享session机制；")]),t._v(" "),i("li",[t._v("查询session id是个查库操作，用户很多时会有性能问题；")]),t._v(" "),i("li",[t._v("无法"),i("strong",[t._v("跨域")]),t._v("。")])]),t._v(" "),i("h3",{attrs:{id:"jwt"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#jwt"}},[t._v("#")]),t._v(" jwt")]),t._v(" "),i("p",[t._v("jwt是基于token验证机制的一种，目前受大多数网站和框架支持。jwt的原理是用户认证后发一个jwt token给用户，其中包含用户的信息，用户后续请求带上这个jwt，服务端就可以自动解析出用户信息。")]),t._v(" "),i("p",[t._v("jwt有三部分组成，都使用json格式：")]),t._v(" "),i("div",{staticClass:"language-text extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[t._v("Header\nPayload\nSignature\n")])])]),i("p",[t._v("jwt可以存放在cookie或者header中，推荐的做法是放到header，可以实现跨域：")]),t._v(" "),i("div",{staticClass:"language-text extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[t._v("Authorization: Bearer &lt;token>\n")])])]),i("p",[t._v("jwt解决了跨域、降低了服务端session开销问题，为分布式服务扫清了障碍，但也无法解决劫持问题，需要配合https才能实现更高的安全性。")]),t._v(" "),i("p",[i("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/164696755",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考链接"),i("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=a.exports}}]);