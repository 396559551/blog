(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{539:function(_,v,t){"use strict";t.r(v);var r=t(6),s=Object(r.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("p",[t("img",{attrs:{src:"https://pic4.zhimg.com/80/v2-fb618335104e81c5995a7cf2c31c12cf_720w.jpg",alt:"img"}})]),_._v(" "),t("ol",[t("li",[_._v("DNS 解析：将域名解析成 IP 地址，解析完成后就需要")]),_._v(" "),t("li",[_._v("建立TCP 连接：TCP 三次握手，然后")]),_._v(" "),t("li",[_._v("发送 HTTP 请求，再到")]),_._v(" "),t("li",[_._v("服务器处理请求并返回 HTTP 报文，服务器处理完成后")]),_._v(" "),t("li",[_._v("浏览器解析渲染页面，")]),_._v(" "),t("li",[_._v("最后断开连接：TCP 四次挥手")])]),_._v(" "),t("h2",{attrs:{id:"url解析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#url解析"}},[_._v("#")]),_._v(" "),t("strong",[_._v("URL解析")])]),_._v(" "),t("p",[_._v("首先浏览器会根据你输入的网址（也就是URL）进行验证，看看是否合法，如果不合法，那么久就会把你输入的内容传给默认的搜索引擎、")]),_._v(" "),t("p",[_._v("如果通过验证，那么就会解析得出协议，域名，资源。")]),_._v(" "),t("h2",{attrs:{id:"dns解析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dns解析"}},[_._v("#")]),_._v(" "),t("strong",[_._v("DNS")]),_._v("解析")]),_._v(" "),t("p",[_._v("在知道了域名是什么之后，浏览器会进行DNS解析，用来获得域名所对应的IP地址")]),_._v(" "),t("p",[_._v("首先会检查域名信息是否在本地缓存中")]),_._v(" "),t("p",[_._v("查找本地缓存顺序大致如下：")]),_._v(" "),t("ul",[t("li",[_._v("浏览器缓存，例如cookie")]),_._v(" "),t("li",[_._v("系统缓存")]),_._v(" "),t("li",[_._v("路由器缓存")]),_._v(" "),t("li",[_._v("ISP DNS缓存")])]),_._v(" "),t("p",[_._v("如果缓存没有的话会查看域名信息是否在本地的 hosts 文件中")]),_._v(" "),t("p",[_._v("如果还不在，那么浏览器会向本地域名服务器发送查询请求，以便获得目标服务器的IP地址，这个查询往往是采用递归查询")]),_._v(" "),t("p",[_._v("如果本地域名服务器也没有，那么本地域名服务器就会代替浏览器去向根域名服务器，顶级域名服务器等去发送查询请求，这个查询往往采用的是迭代查询")]),_._v(" "),t("p",[_._v("然后获得要访问服务器（目标服务器）的IP地址")]),_._v(" "),t("h2",{attrs:{id:"tcp连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tcp连接"}},[_._v("#")]),_._v(" "),t("strong",[_._v("TCP连接")])]),_._v(" "),t("p",[_._v("在知道目标服务器的IP地址后，浏览器会调用库函数socket，生成一个TCP流套接字，也就是完成了"),t("strong",[_._v("TCP封包")])]),_._v(" "),t("p",[_._v("接着进行TCP三次握手：“你瞅啥”——“瞅你咋地”——“过来咱俩唠唠”，完成了这一系列操作之后，浏览器就和目标服务器完成了TCP三次握手并成功建立连接")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://pic1.zhimg.com/80/v2-32fe89ec233b2fa261ecc6a5579dbcec_720w.jpg",alt:"img"}})]),_._v(" "),t("p",[t("strong",[_._v("tcp三次握手过程")])]),_._v(" "),t("blockquote",[t("p",[_._v("原理")])]),_._v(" "),t("p",[_._v("1）发送端首先发送一个带有SYN（synchronize）标志地数据包给接收方。\n2）接收方接收后，回传一个带有SYN/ACK标志的数据包传递确认信息，表示我收到了。\n3）最后，发送方再回传一个带有ACK标志的数据包，代表我知道了，表示’握手‘结束。")]),_._v(" "),t("h2",{attrs:{id:"http连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http连接"}},[_._v("#")]),_._v(" "),t("strong",[_._v("HTTP连接")])]),_._v(" "),t("p",[_._v("成功建立连接之后，我们的浏览器发送http请求报文，去请求服务器资源")]),_._v(" "),t("h4",{attrs:{id:"五层协议其实就是"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五层协议其实就是"}},[_._v("#")]),_._v(" 五层协议其实就是：")]),_._v(" "),t("ol",[t("li",[t("p",[_._v("应用层：(dns,http) DNS解析成IP并发送http请求")])]),_._v(" "),t("li",[t("p",[_._v("传输层(tcp,udp) 建立tcp连接（三次握手）")])]),_._v(" "),t("li",[t("p",[_._v("网络层(IP,ARP) IP寻址")])]),_._v(" "),t("li",[t("p",[_._v("数据链路层(PPP) 封装成帧")])]),_._v(" "),t("li",[t("p",[_._v("物理层(利用物理介质传输比特流) 物理传输（然后传输的时候通过双绞线，电磁波等各种介质）")])])]),_._v(" "),t("h4",{attrs:{id:"osi七层框架-多了表示层和会话层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#osi七层框架-多了表示层和会话层"}},[_._v("#")]),_._v(" OSI七层框架（多了表示层和会话层）")]),_._v(" "),t("ol",[t("li",[_._v("应用层： DNS解析成IP并发送http请求")]),_._v(" "),t("li",[_._v("表示层：处理两个通信系统中交换信息的表示方式，如数据加密与解密")]),_._v(" "),t("li",[_._v("会话层：具体管理不同用户和进程之间的对话，如控制登陆和注销过程")]),_._v(" "),t("li",[_._v("传输层：建立TCP连接（3次握手）")]),_._v(" "),t("li",[_._v("网络层：ip寻址")]),_._v(" "),t("li",[_._v("数据链路层：封装成帧")]),_._v(" "),t("li",[_._v("物理层：物理传输")])]),_._v(" "),t("p",[_._v("http有很多请求方法：")]),_._v(" "),t("ul",[t("li",[_._v("GET")]),_._v(" "),t("li",[_._v("POST")]),_._v(" "),t("li",[_._v("PUT")]),_._v(" "),t("li",[_._v("DELETE")])]),_._v(" "),t("p",[_._v("这里我们用的是GET方法，去获取服务器的相关资源")]),_._v(" "),t("p",[_._v("服务器收到请求报文之后对其进行响应：根据请求信息获得相应的响应内容。")]),_._v(" "),t("h4",{attrs:{id:"http响应码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http响应码"}},[_._v("#")]),_._v(" "),t("strong",[_._v("HTTP响应码")])]),_._v(" "),t("h4",{attrs:{id:"_2xx-成功"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2xx-成功"}},[_._v("#")]),_._v(" "),t("strong",[_._v("2xx 成功")])]),_._v(" "),t("blockquote",[t("p",[t("strong",[_._v("2xx")]),_._v("的响应结果就代表请求被正常处理了")])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("200 OK")]),_._v("：表示客户端发来的请求被服务器正常处理了")]),_._v(" "),t("li",[t("strong",[_._v("204 Not Content")]),_._v(":请求被成功处理，但是返回的响应报文不包含实体的主体部分")]),_._v(" "),t("li",[t("strong",[_._v("206 Partial Content")]),_._v(":客户端进行范围请求，而服务器重新执行了这部分的GET请求")])]),_._v(" "),t("h4",{attrs:{id:"_3xx-重定向"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3xx-重定向"}},[_._v("#")]),_._v(" "),t("strong",[_._v("3xx 重定向")])]),_._v(" "),t("blockquote",[t("p",[t("strong",[_._v("3xx")]),_._v("的响应结果就表明浏览器需要执行某些特殊的处理以正确处理请求")])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("301 Moved Permanently")]),_._v("：永久重定向。表示请求的资源已经被分配了新的URI，以后应该使用新的URI")]),_._v(" "),t("li",[t("strong",[_._v("302 Found")]),_._v(":临时重定向。代表资源只是暂时的移动了以后还可能会移动为新的URI")]),_._v(" "),t("li",[t("strong",[_._v("303 See Other")]),_._v(":由于请求对应的资源存在着另一个URI，应使用GET方法定向获取请求的资源")]),_._v(" "),t("li",[t("strong",[_._v("304 Not Modified")]),_._v(":客户端发送附带条件（请求首部中if开头的属性中的一种）的请求的时候，服务端允许访问资源，但是那些请求并没有满足，直接返回304，即服务端资源未改变，可以直接使用客户端未过期的缓存，304返回时，不包含任何响应的主体部分（虽然被划分为3xx里，但是和重定向没有任何关系）")])]),_._v(" "),t("h4",{attrs:{id:"_4xx-客户端错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4xx-客户端错误"}},[_._v("#")]),_._v(" "),t("strong",[_._v("4xx 客户端错误")])]),_._v(" "),t("blockquote",[t("p",[t("strong",[_._v("4xx")]),_._v("的响应结果就表明客户端是发生错误的原因所在")])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("400 Bad Requset")]),_._v("：请求报文中存在语法错误，请修改请求内容后再发送请求")]),_._v(" "),t("li",[t("strong",[_._v("401 Unauthorized")]),_._v(":客户端未认证授权")]),_._v(" "),t("li",[t("strong",[_._v("403 Forbidden")]),_._v(":服务端禁止客户端访问此资源")]),_._v(" "),t("li",[t("strong",[_._v("404 Not Found")]),_._v(":URL写错了，找不到此路径")])]),_._v(" "),t("h4",{attrs:{id:"_5xx-服务器错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5xx-服务器错误"}},[_._v("#")]),_._v(" "),t("strong",[_._v("5xx 服务器错误")])]),_._v(" "),t("blockquote",[t("p",[t("strong",[_._v("5xx")]),_._v("的响应结果就表明服务器本身发生错误")])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("500 Internal Server Error")]),_._v("：服务器内部故障，可能是bug导致的")]),_._v(" "),t("li",[t("strong",[_._v("503 Service Unavaliable")]),_._v("：服务器暂时不可用（停机维护或者超负载），如果事先知道解除这种情况所需的时间，最好写入响应头中的"),t("code",[_._v("Retry-After")]),_._v("这个字段再返回给客户端")])]),_._v(" "),t("h2",{attrs:{id:"浏览器解析并渲染"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器解析并渲染"}},[_._v("#")]),_._v(" "),t("strong",[_._v("浏览器解析并渲染")])]),_._v(" "),t("ol",[t("li",[t("p",[_._v("解析HTML，构建DOM树")])]),_._v(" "),t("li",[t("p",[_._v("解析CSS，生成CSS规则树")])]),_._v(" "),t("li",[t("p",[_._v("合并DOM树和CSS规则，生成render树 。")]),_._v(" "),t("ul",[t("li",[t("p",[_._v("一般来说，渲染树和DOM树相对应的，但不是严格意义上的一一对应")]),_._v(" "),t("p",[_._v("因为有一些不可见的DOM元素不会插入到渲染树中，如head这种不可见的标签或者"),t("code",[_._v("display: none")]),_._v("等")])])])]),_._v(" "),t("li",[t("p",[_._v("布局render树（Layout/reflow【回流】），负责各元素尺寸、位置的计算。")]),_._v(" "),t("ul",[t("li",[_._v("一般意味着元素的内容、结构、位置或尺寸发生了变化，需要重新计算样式和渲染树")])])]),_._v(" "),t("li",[t("p",[_._v("绘制render树（paint），绘制页面像素信息")])]),_._v(" "),t("li",[t("p",[_._v("浏览器会将各层的信息发送给GPU，GPU会将各层合成（composite），显示在屏幕上")])])]),_._v(" "),t("h2",{attrs:{id:"关闭连接"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关闭连接"}},[_._v("#")]),_._v(" "),t("strong",[_._v("关闭连接")])]),_._v(" "),t("p",[_._v("在完成了一次http请求之后，会根据实际情况看是否关闭连接（设置是长连接还是短连接）")]),_._v(" "),t("p",[_._v("最后进行TCP四次挥手关闭连接")]),_._v(" "),t("blockquote",[t("p",[_._v("原理")])]),_._v(" "),t("p",[_._v("1）第一次挥手：Client发送一个FIN，用来关闭Client到Server的数据传送，Client进入FIN_WAIT_1状态。\n2）第二次挥手：Server收到FIN后，发送一个ACK给Client，确认序号为收到序号+1（与SYN相同，一个FIN占用一个序号），Server进入CLOSE_WAIT状态。\n3）第三次挥手：Server发送一个FIN，用来关闭Server到Client的数据传送，Server进入LAST_ACK状态。\n4）第四次挥手：Client收到FIN后，Client进入TIME_WAIT状态，接着发送一个ACK给Server，确认序号为收到序号+1，Server进入CLOSED状态，完成四次挥手。")]),_._v(" "),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[_._v("#")]),_._v(" "),t("strong",[_._v("总结")])]),_._v(" "),t("p",[_._v("写到这里，我们基本上从技术的角度讲解了从URL输入到获取资源，整个流程发生了什么。我们再来捋一捋，首先是DNS 解析：将域名解析成 IP 地址，解析完成后就需要建立TCP 连接：TCP 三次握手，然后发送 HTTP 请求，再到服务器处理请求并返回 HTTP 报文，服务器处理完成后浏览器解析渲染页面，最后断开连接：TCP 四次挥手")])])}),[],!1,null,null,null);v.default=s.exports}}]);